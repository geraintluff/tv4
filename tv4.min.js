(function(n){function h(a,c){if(void 0!=c.$ref&&(c=n.tv4.getSchema(c.$ref),!c))return null;var b;b=c;var d;b:if(void 0==b.type)d=null;else{d=typeof a;null==a?d="null":Array.isArray(a)&&(d="array");var e=b.type;"object"!=typeof e&&(e=[e]);for(var g=0;g<e.length;g++){var j=e[g];if(j==d||"integer"==j&&"number"==d&&0==a%1){d=null;break b}}d=new f("invalid data type: "+d)}if(d)b=d.prefixWith(null,"type");else{b:if(void 0==b["enum"])b=null;else{for(e=0;e<b["enum"].length;e++)if(k(a,b["enum"][e])){b=null;
break b}b=new f("No enum match for: "+JSON.stringify(a))}b=(d=b)?d.prefixWith(null,"type"):null}if(!b&&(b=c.multipleOf||c.divisibleBy,!(b=(void 0==b?null:"number"==typeof a&&0!=a%b?new f("Value "+a+" is not a multiple of "+b):null)||r(a,c)||null)))if(!(b=("string"!=typeof a?null:void 0!=c.minLength&&a.length<c.minLength?(new f("String is too short ("+a.length+" chars), minimum "+c.minLength)).prefixWith(null,"minLength"):void 0!=c.maxLength&&a.length>c.maxLength?(new f("String is too long ("+a.length+
" chars), maximum "+c.maxLength)).prefixWith(null,"maxLength"):null)||("string"!=typeof a||void 0==c.pattern?null:!RegExp(c.pattern).test(a)?(new f("String does not match pattern")).prefixWith(null,"pattern"):null)||null)){b=c;if(Array.isArray(a)){if(!(d=void 0!=b.minItems&&a.length<b.minItems?(new f("Array is too short ("+a.length+"), minimum "+b.minItems)).prefixWith(null,"minItems"):void 0!=b.maxItems&&a.length>b.maxItems?(new f("Array is too long ("+a.length+" chars), maximum "+b.maxItems)).prefixWith(null,
"maxItems"):null)){b:{if(b.uniqueItems)for(d=0;d<a.length;d++)for(e=d+1;e<a.length;e++)if(k(a[d],a[e])){d=(new f("Array items are not unique (indices "+d+" and "+e+")")).prefixWith(null,"uniqueItems");break b}d=null}d=d||s(a,b)||null}b=d}else b=null;if(!b){b=c;if("object"!=typeof a||null==a||Array.isArray(a))b=null;else{d=Object.keys(a);if(!(d=void 0!=b.minProperties&&d.length<b.minProperties?(new f("Too few properties defined ("+d.length+"), minimum "+b.minProperties)).prefixWith(null,"minProperties"):
void 0!=b.maxProperties&&d.length>b.maxProperties?(new f("Too many properties defined ("+d.length+"), maximum "+b.maxProperties)).prefixWith(null,"maxProperties"):null)){b:{if(void 0!=b.required)for(d=0;d<b.required.length;d++)if(e=b.required[d],void 0===a[e]){d=(new f("Missing required property: "+e)).prefixWith(null,""+d).prefixWith(null,"required");break b}d=null}d=d||t(a,b)||u(a,b)||null}b=d}if(!b){b=c;a:if(void 0==b.allOf)d=null;else{for(e=0;e<b.allOf.length;e++)if(d=h(a,b.allOf[e])){d=d.prefixWith(null,
""+e).prefixWith(null,"allOf");break a}d=void 0}if(!d){a:if(void 0==b.anyOf)d=null;else{d=[];for(e=0;e<b.anyOf.length;e++){g=h(a,b.anyOf[e]);if(null==g){d=null;break a}d.push(g.prefixWith(null,""+e).prefixWith(null,"anyOf"))}d=new f('Data does not match any schemas from "anyOf"',"","/anyOf",d)}if(!d){a:if(void 0==b.oneOf)d=null;else{d=null;e=[];for(g=0;g<b.oneOf.length;g++)if(j=h(a,b.oneOf[g]),null==j)if(null==d)d=g;else{d=new f('Data is valid against more than one schema from "oneOf": indices '+
d+" and "+g,"","/oneOf");break a}else e.push(j.prefixWith(null,""+g).prefixWith(null,"oneOf"));d=null==d?new f('Data does not match any schemas from "oneOf"',"","/oneOf",e):null}d=d||(void 0==b.not?null:null==h(a,b.not)?new f('Data matches schema from "not"',"","/not"):null)||null}}b=d||null}}}return b}function k(a,c){if(a===c)return!0;if("object"==typeof a&&"object"==typeof c){if(Array.isArray(a)!=Array.isArray(c))return!1;if(Array.isArray(a)){if(a.length!=c.length)return!1;for(var b=0;b<a.length;b++)if(!k(a[b],
c[b]))return!1}else{for(b in a)if(void 0===c[b]&&void 0!==a[b])return!1;for(b in c)if(void 0===a[b]&&void 0!==c[b])return!1;for(b in a)if(!k(a[b],c[b]))return!1}return!0}return!1}function r(a,c){if("number"!=typeof a)return null;if(void 0!=c.minimum){if(a<c.minimum)return(new f("Value "+a+" is less than minimum "+c.minimum)).prefixWith(null,"minimum");if(c.exclusiveMinimum&&a==c.minimum)return(new f("Value "+a+" is equal to exclusive minimum "+c.minimum)).prefixWith(null,"exclusiveMinimum")}if(void 0!=
c.maximum){if(a>c.maximum)return(new f("Value "+a+" is greater than maximum "+c.maximum)).prefixWith(null,"maximum");if(c.exclusiveMaximum&&a==c.maximum)return(new f("Value "+a+" is equal to exclusive maximum "+c.maximum)).prefixWith(null,"exclusiveMaximum")}return null}function s(a,c){if(void 0==c.items)return null;var b;if(Array.isArray(c.items))for(var d=0;d<a.length;d++)if(d<c.items.length){if(b=h(a[d],c.items[d]))return b.prefixWith(null,""+d).prefixWith(""+d,"items")}else{if(void 0!=c.additionalItems)if("boolean"==
typeof c.additionalItems){if(!c.additionalItems)return(new f("Additional items not allowed")).prefixWith(""+d,"additionalItems")}else if(b=h(a[d],c.additionalItems))return b.prefixWith(""+d,"additionalItems")}else for(d=0;d<a.length;d++)if(b=h(a[d],c.items))return b.prefixWith(""+d,"items");return null}function t(a,c){var b,d;for(d in a){var e=!1;if(void 0!=c.properties&&void 0!=c.properties[d]&&(e=!0,b=h(a[d],c.properties[d])))return b.prefixWith(d,d).prefixWith(null,"properties");if(void 0!=c.patternProperties)for(var g in c.patternProperties)if(RegExp(g).test(d)&&
(e=!0,b=h(a[d],c.patternProperties[g])))return b.prefixWith(d,g).prefixWith(null,"patternProperties");if(!e&&void 0!=c.additionalProperties)if("boolean"==typeof c.additionalProperties){if(!c.additionalProperties)return(new f("Additional properties not allowed")).prefixWith(d,"additionalProperties")}else if(b=h(a[d],c.additionalProperties))return b.prefixWith(d,"additionalProperties")}return null}function u(a,c){var b;if(void 0!=c.dependencies)for(var d in c.dependencies)if(void 0!==a[d])if(b=c.dependencies[d],
"string"==typeof b){if(void 0===a[b])return(new f("Dependency failed - key must exist: "+b)).prefixWith(null,d).prefixWith(null,"dependencies")}else if(Array.isArray(b))for(var e=0;e<b.length;e++){var g=b[e];if(void 0===a[g])return(new f("Dependency failed - key must exist: "+g)).prefixWith(null,""+e).prefixWith(null,d).prefixWith(null,"dependencies")}else if(b=h(a,b))return b.prefixWith(null,d).prefixWith(null,"dependencies");return null}function p(a){return(a=String(a).replace(/^\s+|\s+$/g,"").match(/^([^:\/?#]+:)?(\/\/(?:[^:@]*(?::[^:@]*)?@)?(([^:\/?#]*)(?::(\d*))?))?([^?#]*)(\?[^#]*)?(#[\s\S]*)?/))?
{href:a[0]||"",protocol:a[1]||"",authority:a[2]||"",host:a[3]||"",hostname:a[4]||"",port:a[5]||"",pathname:a[6]||"",search:a[7]||"",hash:a[8]||""}:null}function m(a,c){c=p(c||"");a=p(a||"");var b;if(!c||!a)b=null;else{b=(c.protocol||a.protocol)+(c.protocol||c.authority?c.authority:a.authority);var d;d=c.protocol||c.authority||"/"===c.pathname.charAt(0)?c.pathname:c.pathname?(a.authority&&!a.pathname?"/":"")+a.pathname.slice(0,a.pathname.lastIndexOf("/")+1)+c.pathname:a.pathname;var e=[];d.replace(/^(\.\.?(\/|$))+/,
"").replace(/\/(\.(\/|$))+/g,"/").replace(/\/\.\.$/,"/../").replace(/\/?[^\/]*/g,function(a){"/.."===a?e.pop():e.push(a)});d=e.join("").replace(/^\//,"/"===d.charAt(0)?"/":"");b=b+d+(c.protocol||c.authority||c.pathname?c.search:c.search||a.search)+c.hash}return b}function l(a,c){void 0==c?c=a.id:"string"==typeof a.id&&(c=m(c,a.id),a.id=c);if("object"==typeof a)if(Array.isArray(a))for(var b=0;b<a.length;b++)l(a[b],c);else if("string"==typeof a.$ref)a.$ref=m(c,a.$ref);else for(b in a)"enum"!=b&&l(a[b],
c)}function f(a,c,b,d){this.message=a;this.dataPath=c?c:"";this.schemaPath=b?b:"";this.subErrors=d?d:null}function q(a,c,b){if("string"==typeof c.id&&c.id.substring(0,b.length)==b){var d=c.id.substring(b.length);if(0<b.length&&"/"==b.charAt(b.length-1)||"#"==d.charAt(0)||"?"==d.charAt(0))void 0==a[c.id]&&(a[c.id]=c)}if("object"==typeof c)for(var e in c)"enum"!=e&&"object"==typeof c[e]&&q(a,c[e],b);return a}f.prototype={prefixWith:function(a,c){null!=a&&(a=a.replace("~","~0").replace("/","~1"),this.dataPath=
"/"+a+this.dataPath);null!=c&&(c=c.replace("~","~0").replace("/","~1"),this.schemaPath="/"+c+this.schemaPath);if(null!=this.subErrors)for(var b=0;b<this.subErrors.length;b++)this.subErrors[b].prefixWith(a,c);return this}};n.tv4={schemas:{},validate:function(a,c){"string"==typeof c&&(c={$ref:c});this.missing=[];var b=this.addSchema("",c),d=h(a,c),e;for(e in b)delete this.schemas[e];this.error=d;return null==d?!0:!1},addSchema:function(a,c){var b={};b[a]=c;l(c,a);q(b,c,a);for(var d in b)this.schemas[d]=
b[d];return b},getSchema:function(a){if(void 0!=this.schemas[a])return a=this.schemas[a];var c=a,b="";-1!=a.indexOf("#")&&(b=a.substring(a.indexOf("#")+1),c=a.substring(0,a.indexOf("#")));if(void 0!=this.schemas[c]){a=this.schemas[c];b=decodeURIComponent(b);if(""==b)return a;if("/"!=b.charAt(0))return;for(var b=b.split("/").slice(1),d=0;d<b.length;d++){var e=b[d].replace("~1","/").replace("~0","~");if(void 0==a[e]){a=void 0;break}a=a[e]}if(void 0!=a)return a}void 0==this.missing[c]&&(this.missing.push(c),
this.missing[c]=c)},missing:[],error:null,normSchema:l,resolveUrl:m}})("undefined"!==typeof module&&module.exports?exports:this);
