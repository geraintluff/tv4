(function(B){function t(H,G){if(G["$ref"]!=undefined){G=B.tv4.getSchema(G["$ref"]);if(!G){return null}}var F=false;return e(H,G)||i(H,G)||z(H,G)||m(H,G)||v(H,G)||u(H,G)||null}function E(F,I){if(F===I){return true}if(typeof F=="object"&&typeof I=="object"){if(Array.isArray(F)!=Array.isArray(I)){return false}else{if(Array.isArray(F)){if(F.length!=I.length){return false}for(var H=0;H<F.length;H++){if(!E(F[H],I[H])){return false}}}else{for(var G in F){if(I[G]===undefined&&F[G]!==undefined){return false}}for(var G in I){if(F[G]===undefined&&I[G]!==undefined){return false}}for(var G in F){if(!E(F[G],I[G])){return false}}}}return true}return false}function e(H,G){var F;if(F=j(H,G)){return F.prefixWith(null,"type")}if(F=r(H,G)){return F.prefixWith(null,"type")}return null}function j(J,I){if(I.type==undefined){return null}var F=typeof J;if(J==null){F="null"}else{if(Array.isArray(J)){F="array"}}var K=I.type;if(typeof K!="object"){K=[K]}for(var G=0;G<K.length;G++){var H=K[G];if(H==F||(H=="integer"&&F=="number"&&(J%1==0))){return null}}return new n("invalid data type: "+F)}function r(H,G){if(G["enum"]==undefined){return null}for(var F=0;F<G["enum"].length;F++){var I=G["enum"][F];if(E(H,I)){return null}}return new n("No enum match for: "+JSON.stringify(H))}function i(G,F){return c(G,F)||f(G,F)||null}function c(H,G){var F=G.multipleOf||G.divisibleBy;if(F==undefined){return null}if(typeof H=="number"){if(H%F!=0){return new n("Value "+H+" is not a multiple of "+F)}}return null}function f(G,F){if(typeof G!="number"){return null}if(F.minimum!=undefined){if(G<F.minimum){return new n("Value "+G+" is less than minimum "+F.minimum).prefixWith(null,"minimum")}if(F.exclusiveMinimum&&G==F.minimum){return new n("Value "+G+" is equal to exclusive minimum "+F.minimum).prefixWith(null,"exclusiveMinimum")}}if(F.maximum!=undefined){if(G>F.maximum){return new n("Value "+G+" is greater than maximum "+F.maximum).prefixWith(null,"maximum")}if(F.exclusiveMaximum&&G==F.maximum){return new n("Value "+G+" is equal to exclusive maximum "+F.maximum).prefixWith(null,"exclusiveMaximum")}}return null}function z(G,F){return g(G,F)||A(G,F)||null}function g(G,F){if(typeof G!="string"){return null}if(F.minLength!=undefined){if(G.length<F.minLength){return(new n("String is too short ("+G.length+" chars), minimum "+F.minLength)).prefixWith(null,"minLength")}}if(F.maxLength!=undefined){if(G.length>F.maxLength){return(new n("String is too long ("+G.length+" chars), maximum "+F.maxLength)).prefixWith(null,"maxLength")}}return null}function A(H,F){if(typeof H!="string"||F.pattern==undefined){return null}var G=new RegExp(F.pattern);if(!G.test(H)){return new n("String does not match pattern").prefixWith(null,"pattern")}return null}function m(G,F){if(!Array.isArray(G)){return null}return y(G,F)||q(G,F)||a(G,F)||null}function y(G,F){if(F.minItems!=undefined){if(G.length<F.minItems){return(new n("Array is too short ("+G.length+"), minimum "+F.minItems)).prefixWith(null,"minItems")}}if(F.maxItems!=undefined){if(G.length>F.maxItems){return(new n("Array is too long ("+G.length+" chars), maximum "+F.maxItems)).prefixWith(null,"maxItems")}}return null}function q(I,H){if(H.uniqueItems){for(var G=0;G<I.length;G++){for(var F=G+1;F<I.length;F++){if(E(I[G],I[F])){return(new n("Array items are not unique (indices "+G+" and "+F+")")).prefixWith(null,"uniqueItems")}}}}return null}function a(I,H){if(H.items==undefined){return null}var F;if(Array.isArray(H.items)){for(var G=0;G<I.length;G++){if(G<H.items.length){if(F=t(I[G],H.items[G])){return F.prefixWith(null,""+G).prefixWith(""+G,"items")}}else{if(H.additionalItems!=undefined){if(typeof H.additionalItems=="boolean"){if(!H.additionalItems){return(new n("Additional items not allowed")).prefixWith(""+G,"additionalItems")}}else{if(F=t(I[G],H.additionalItems)){return F.prefixWith(""+G,"additionalItems")}}}}}}else{for(var G=0;G<I.length;G++){if(F=t(I[G],H.items)){return F.prefixWith(""+G,"items")}}}return null}function v(G,F){if(typeof G!="object"||G==null||Array.isArray(G)){return null}return d(G,F)||l(G,F)||h(G,F)||D(G,F)||null}function d(H,G){var F=Object.keys(H);if(G.minProperties!=undefined){if(F.length<G.minProperties){return new n("Too few properties defined ("+F.length+"), minimum "+G.minProperties).prefixWith(null,"minProperties")}}if(G.maxProperties!=undefined){if(F.length>G.maxProperties){return new n("Too many properties defined ("+F.length+"), maximum "+G.maxProperties).prefixWith(null,"maxProperties")}}return null}function l(I,H){if(H.required!=undefined){for(var G=0;G<H.required.length;G++){var F=H.required[G];if(I[F]===undefined){return new n("Missing required property: "+F).prefixWith(null,""+G).prefixWith(null,"required")}}}return null}function h(K,I){var G;for(var H in K){var L=false;if(I.properties!=undefined&&I.properties[H]!=undefined){L=true;if(G=t(K[H],I.properties[H])){return G.prefixWith(H,H).prefixWith(null,"properties")}}if(I.patternProperties!=undefined){for(var F in I.patternProperties){var J=new RegExp(F);if(J.test(H)){L=true;if(G=t(K[H],I.patternProperties[F])){return G.prefixWith(H,F).prefixWith(null,"patternProperties")}}}}if(!L&&I.additionalProperties!=undefined){if(typeof I.additionalProperties=="boolean"){if(!I.additionalProperties){return new n("Additional properties not allowed").prefixWith(H,"additionalProperties")}}else{if(G=t(K[H],I.additionalProperties)){return G.prefixWith(H,"additionalProperties")}}}}return null}function D(K,H){var F;if(H.dependencies!=undefined){for(var J in H.dependencies){if(K[J]!==undefined){var L=H.dependencies[J];if(typeof L=="string"){if(K[L]===undefined){return new n("Dependency failed - key must exist: "+L).prefixWith(null,J).prefixWith(null,"dependencies")}}else{if(Array.isArray(L)){for(var G=0;G<L.length;G++){var I=L[G];if(K[I]===undefined){return new n("Dependency failed - key must exist: "+I).prefixWith(null,""+G).prefixWith(null,J).prefixWith(null,"dependencies")}}}else{if(F=t(K,L)){return F.prefixWith(null,J).prefixWith(null,"dependencies")}}}}}}return null}function u(H,G){var F;return o(H,G)||C(H,G)||p(H,G)||x(H,G)||null}function o(J,I){if(I.allOf==undefined){return null}var F;for(var H=0;H<I.allOf.length;H++){var G=I.allOf[H];if(F=t(J,G)){return F.prefixWith(null,""+H).prefixWith(null,"allOf")}}}function C(J,I){if(I.anyOf==undefined){return null}var K=[];for(var H=0;H<I.anyOf.length;H++){var G=I.anyOf[H];var F=t(J,G);if(F==null){return null}K.push(F.prefixWith(null,""+H).prefixWith(null,"anyOf"))}return new n('Data does not match any schemas from "anyOf"',"","/anyOf",K)}function p(J,I){if(I.oneOf==undefined){return null}var K=null;var L=[];for(var H=0;H<I.oneOf.length;H++){var G=I.oneOf[H];var F=t(J,G);if(F==null){if(K==null){K=H}else{return new n('Data is valid against more than one schema from "oneOf": indices '+K+" and "+H,"","/oneOf")}}else{L.push(F.prefixWith(null,""+H).prefixWith(null,"oneOf"))}}if(K==null){return new n('Data does not match any schemas from "oneOf"',"","/oneOf",L)}return null}function x(H,G){if(G.not==undefined){return null}var F=t(H,G.not);if(F==null){return new n('Data matches schema from "not"',"","/not")}return null}function s(G){var F=String(G).replace(/^\s+|\s+$/g,"").match(/^([^:\/?#]+:)?(\/\/(?:[^:@]*(?::[^:@]*)?@)?(([^:\/?#]*)(?::(\d*))?))?([^?#]*)(\?[^#]*)?(#[\s\S]*)?/);return(F?{href:F[0]||"",protocol:F[1]||"",authority:F[2]||"",host:F[3]||"",hostname:F[4]||"",port:F[5]||"",pathname:F[6]||"",search:F[7]||"",hash:F[8]||""}:null)}function b(G,F){function H(J){var I=[];J.replace(/^(\.\.?(\/|$))+/,"").replace(/\/(\.(\/|$))+/g,"/").replace(/\/\.\.$/,"/../").replace(/\/?[^\/]*/g,function(K){if(K==="/.."){I.pop()}else{I.push(K)}});return I.join("").replace(/^\//,J.charAt(0)==="/"?"/":"")}F=s(F||"");G=s(G||"");return !F||!G?null:(F.protocol||G.protocol)+(F.protocol||F.authority?F.authority:G.authority)+H(F.protocol||F.authority||F.pathname.charAt(0)==="/"?F.pathname:(F.pathname?((G.authority&&!G.pathname?"/":"")+G.pathname.slice(0,G.pathname.lastIndexOf("/")+1)+F.pathname):G.pathname))+(F.protocol||F.authority||F.pathname?F.search:(F.search||G.search))+F.hash}function k(H,I){if(I==undefined){I=H.id}else{if(H.id!=undefined){I=b(I,H.id);H.id=I}}if(typeof H=="object"){if(Array.isArray(H)){for(var G=0;G<H.length;G++){k(H[G],I)}}else{if(H["$ref"]!=undefined){H["$ref"]=b(I,H["$ref"])}else{for(var F in H){if(F!="enum"){k(H[F],I)}}}}}}function n(H,G,F,I){this.message=H;this.dataPath=G?G:"";this.schemaPath=F?F:"";this.subErrors=I?I:null}n.prototype={prefixWith:function(H,F){if(H!=null){H=H.replace("~","~0").replace("/","~1");this.dataPath="/"+H+this.dataPath}if(F!=null){F=F.replace("~","~0").replace("/","~1");this.schemaPath="/"+F+this.schemaPath}if(this.subErrors!=null){for(var G=0;G<this.subErrors.length;G++){this.subErrors[G].prefixWith(H,F)}}return this}};var w={schemas:{},validate:function(H,G){if(typeof G=="string"){G={"$ref":G}}this.missing=[];this.addSchema("",G);var F=t(H,G);delete this.schemas[""];this.error=F;if(F==null){return true}else{return false}},addSchema:function(F,G){k(G,F);this.schemas[F]=G},getSchema:function(I){if(this.schemas[I]!=undefined){var L=this.schemas[I];return L}var K=I;var H="";if(I.indexOf("#")!=-1){H=I.substring(I.indexOf("#")+1);K=I.substring(0,I.indexOf("#"))}if(this.schemas[K]!=undefined){var L=this.schemas[K];var G=decodeURIComponent(H);var M=G.split("/").slice(1);for(var J=0;J<M.length;J++){var F=M[J].replace("~1","/").replace("~0","~");if(L[F]==undefined){L=undefined;break}L=L[F]}if(L!=undefined){return L}}if(this.missing[K]==undefined){this.missing.push(K);this.missing[K]=K}},missing:[],error:null,normSchema:k,resolveUrl:b};B.tv4=w})((typeof module!=="undefined"&&module.exports)?exports:this);